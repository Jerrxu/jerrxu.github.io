<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link href="css/style.css" rel="stylesheet">
</head>


<body>
<header>
   <h1>Jerry Xu</h1>
</header>

<div class="parent">
	<div class="column1">
	</div>
	<div class="column9">
		<h2>What I Do:</h2>
		<text>Inspired by <a href="http://uni.xkcd.com/">uni.xkcd.com</a></text><br>
		<div id="ha">
			<text id="list"></text>
			<label>guest@jerrxu:/$ </label>
			<input id="textbox" type="text" size=50/>
		</div>
		
	</div>
</div>

<footer>
	<text>It's been </text><text id="p1"></text><text> since I worked on this :(</text>
</footer>

<script>
var last = 1482255662;			// alert("done");
var s = m = h = d = w = 0;		// seconds, minutes, hours, days, weeks
var str;

$(document).ready(function(){
	$(startup());
	function startup(){
		var t = new Date().getTime().toString().substr(0, 10) - last;
		w = Math.floor(t/604800);
		t = t%604800;
		d = Math.floor(t/86400);
		t = t%86400;
		h = Math.floor(t/3600);
		t = t%3600;
		m = Math.floor(t/60);
		t = t%60;
		s = t;
		count();
		last=setInterval(count,1000);
		$('#textbox').focus();
	}

	function count() {
		s++;
		if ( s >= 60 ){
			s = 0;
			m++;
			if ( m == 60 ){
				m = 0;
				h++;
				if ( h == 24 ){
					h = 0;
					d++;
					if ( d == 7 ){
						d = 0;
						w++;
					}
				}
			}
		}
		str = "";
		checkAndConc(s, " second");
		if(s!=0){
			str = " and " + str;
		}
		checkAndConc(m, " minute");
		checkAndConc(h, " hour");
		checkAndConc(d, " day");
		checkAndConc(w, " week");
		document.getElementById("p1").innerHTML = str;	
	}

	function checkAndConc(t, string){
		if ( t == 1 ){
			str = t + string + " " + str;
		} else if ( t > 1 ){
			str = t + string + "s " + str;
		}
	}
	
	
	$('#textbox').keypress(function(event){
		var keycode = (event.keyCode ? event.keyCode : event.which);
		if(keycode == '13'){
			//alert('You pressed a "enter" key in textbox');
			var ent = $("#textbox").val();
			$("#list").append("guest@jerrxu:/$ " + ent + "<br>");
			
			switch(ent){
				default:	//invalid command
					$("#list").append('Unrecognized command. Type "help" for assistance.<br>');
					break;
				case "":	//empty command
					break;
				//non-empty, valid commands
				case "cat":
					$("#list").append("You're a kitty!<br>");
					break;
				case "dog":
					$("#list").append("Arf!<br>");
					break;
				case "resume":
				case "help":
					$("#list").append("Sorry I'm working on that.<br>");				
			}
			
			$("#textbox").val("");		// clears textbox
			$("html, body").animate({ scrollTop: $(document).height() }, "slow");
			$('#textbox').focus();
		}
		event.stopPropagation();
	});
});
</script>
</body>
</html>